# Implementation Tasks: Ingredient Inventory Management

## 1. 数据模型设计
- [ ] 1.1 设计InventoryItem模型（库存条目）
- [ ] 1.2 设计InventoryUsage模型（使用记录）
- [ ] 1.3 设计WasteLog模型（浪费记录）
- [ ] 1.4 设计StorageLocation模型（存储位置）
- [ ] 1.5 创建数据库迁移脚本

## 2. 库存录入
- [ ] 2.1 开发手动添加库存界面
- [ ] 2.2 实现食材搜索选择
- [ ] 2.3 添加数量和单位输入
- [ ] 2.4 设置购买日期和保质期
- [ ] 2.5 选择存储位置（冷藏、冷冻、常温）
- [ ] 2.6 支持批量添加

## 3. 自动库存同步
- [ ] 3.1 监听订单完成事件
- [ ] 3.2 从订单提取食材信息
- [ ] 3.3 自动添加到库存
- [ ] 3.4 智能推断保质期（基于食材类型）
- [ ] 3.5 用户确认和调整

## 4. 保质期管理
- [ ] 4.1 计算剩余保质期
- [ ] 4.2 实现分级警告（临期7天、3天、1天）
- [ ] 4.3 开发过期食材自动标记
- [ ] 4.4 生成临期食材清单
- [ ] 4.5 推送过期提醒通知

## 5. 库存使用记录
- [ ] 5.1 与打卡系统联动（自动扣减）
- [ ] 5.2 手动记录使用
- [ ] 5.3 实现部分使用（如1kg番茄用了500g）
- [ ] 5.4 追踪使用历史
- [ ] 5.5 计算使用率

## 6. 库存查询与展示
- [ ] 6.1 开发库存列表（按类别、位置、保质期排序）
- [ ] 6.2 实现搜索和筛选
- [ ] 6.3 显示临期和过期标签
- [ ] 6.4 添加库存总览（多少种食材、总价值）
- [ ] 6.5 开发详情页（单个食材的使用历史）

## 7. 库存不足预警
- [ ] 7.1 定义最低库存阈值（如鸡蛋<5个）
- [ ] 7.2 检测库存不足
- [ ] 7.3 生成补货建议
- [ ] 7.4 自动添加到购物清单

## 8. 智能采购建议
- [ ] 8.1 基于未来7天食谱计算所需食材
- [ ] 8.2 对比当前库存
- [ ] 8.3 生成缺少食材清单
- [ ] 8.4 排除库存充足的食材
- [ ] 8.5 考虑临期食材优先使用

## 9. 浪费分析
- [ ] 9.1 记录过期/丢弃食材
- [ ] 9.2 计算浪费金额
- [ ] 9.3 生成月度浪费报告
- [ ] 9.4 分析高浪费品类
- [ ] 9.5 提供减少浪费建议

## 10. 存储位置管理
- [ ] 10.1 定义存储位置类型（冷藏、冷冻、常温）
- [ ] 10.2 按位置分组显示
- [ ] 10.3 添加温度监控（可选）
- [ ] 10.4 存储建议（如番茄应常温保存）

## 11. 条形码扫描（可选）
- [ ] 11.1 集成相机访问
- [ ] 11.2 对接条码识别API
- [ ] 11.3 根据条码查询食材信息
- [ ] 11.4 快速添加到库存

## 12. API路由
- [ ] 12.1 POST /api/inventory/items - 添加库存
- [ ] 12.2 GET /api/inventory/items - 库存列表
- [ ] 12.3 GET /api/inventory/items/[id] - 库存详情
- [ ] 12.4 PATCH /api/inventory/items/[id] - 更新库存
- [ ] 12.5 DELETE /api/inventory/items/[id] - 删除库存
- [ ] 12.6 POST /api/inventory/use - 记录使用
- [ ] 12.7 GET /api/inventory/expiring - 临期食材
- [ ] 12.8 GET /api/inventory/stats - 库存统计
- [ ] 12.9 POST /api/inventory/sync-order - 同步订单

## 13. 前端组件
- [ ] 13.1 开发InventoryList（库存列表）
- [ ] 13.2 创建AddInventoryItem（添加库存）
- [ ] 13.3 实现InventoryItemCard（库存卡片）
- [ ] 13.4 开发ExpiryAlert（过期警报）
- [ ] 13.5 创建UsageHistory（使用历史）
- [ ] 13.6 实现WasteReport（浪费报告）
- [ ] 13.7 添加StorageView（按位置查看）
- [ ] 13.8 开发BarcodeScannerModal（扫码添加）

## 14. 与其他模块集成
- [ ] 14.1 购物清单生成时排除库存食材
- [ ] 14.2 食谱推荐时优先使用库存食材
- [ ] 14.3 打卡记录时自动扣减库存
- [ ] 14.4 订单完成时自动同步库存

## 15. 通知与提醒
- [ ] 15.1 临期食材提醒（提前3天）
- [ ] 15.2 库存不足提醒
- [ ] 15.3 建议使用库存食材
- [ ] 15.4 过期食材清理提醒

## 16. 测试
- [ ] 16.1 单元测试：保质期计算
- [ ] 16.2 单元测试：库存扣减逻辑
- [ ] 16.3 单元测试：浪费分析算法
- [ ] 16.4 集成测试：订单同步库存
- [ ] 16.5 E2E测试：完整库存管理流程
- [ ] 16.6 性能测试：大量库存数据查询

## 17. 文档
- [ ] 17.1 编写库存管理最佳实践
- [ ] 17.2 创建保质期参考表
- [ ] 17.3 添加减少浪费建议指南

