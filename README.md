# ğŸ©º Health Butlerï¼ˆå¥åº·ç®¡å®¶ï¼‰

[![Cloudflare Pages](https://img.shields.io/badge/Deployed%20on-Cloudflare%20Pages-orange?logo=cloudflare)](https://hearthbulter.pages.dev)
[![Next.js](https://img.shields.io/badge/Next.js-15-black?logo=next.js)](https://nextjs.org/)
[![Supabase](https://img.shields.io/badge/Database-Supabase-green?logo=supabase)](https://supabase.com/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

> è®©ä¸ªäººä¸å®¶åº­çš„å¥åº·ç®¡ç†ä»ã€Œä¸»è§‚æ„Ÿæ€§ã€èµ°å‘ã€Œå®¢è§‚æ•°æ®é©±åŠ¨ã€

ğŸš€ **ç”Ÿäº§ç¯å¢ƒ**: [https://hearthbulter.pages.dev](https://hearthbulter.pages.dev)

**Health Butler** æ˜¯ä¸€ä¸ªåŸºäºå¥åº·æ•°æ®ä¸ç”µå•†åº“å­˜çš„åŠ¨æ€é¥®é£Ÿå¼•æ“ï¼Œé€šè¿‡AIè¥å…»è§„åˆ’ã€æ™ºèƒ½é£Ÿè°±ç”Ÿæˆå’Œç”µå•†è‡ªåŠ¨é‡‡è´­ï¼Œå¸®åŠ©å®¶åº­å»ºç«‹å¯æŒç»­çš„å¥åº·ç®¡ç†ä¹ æƒ¯ã€‚

**æ¶æ„**: çº¯ Cloudflare Pages + Supabase æ¶æ„ï¼Œå®Œå…¨å…è´¹éƒ¨ç½²ï¼

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ§¬ æ•°æ®é©±åŠ¨çš„è¥å…»è§„åˆ’
- æ¥å…¥ä½“æ£€æŠ¥å‘Šï¼ˆOCRè¯†åˆ«ï¼‰å’Œå¯ç©¿æˆ´è®¾å¤‡æ•°æ®
- åŸºäºBMR/TDEEè‡ªåŠ¨è®¡ç®—ä¸ªæ€§åŒ–å®é‡è¥å…»ç´ åˆ†é…
- æ”¯æŒä¸åŒå¥åº·ç›®æ ‡ï¼ˆå‡é‡/å¢è‚Œ/ç»´æŒ/ç–¾ç—…ç®¡ç†ï¼‰

### ğŸ± æ™ºèƒ½é£Ÿè°±ç”Ÿæˆ
- 7å¤©/30å¤©/90å¤©å‘¨æœŸæ€§é£Ÿè°±è®¡åˆ’
- åŠ¨æ€é€‚é…å­£èŠ‚ã€åœ°åŒºä¸ç”µå•†å¹³å°åº“å­˜
- è€ƒè™‘å®¶åº­æˆå‘˜å·®å¼‚ï¼ˆè€å¹´äººé™é’ ã€å„¿ç«¥è¡¥é’™ç­‰ï¼‰

### ğŸ›’ ç”µå•†è‡ªåŠ¨é‡‡è´­
- ä¸€é”®ç”Ÿæˆè´­ç‰©æ¸…å•å¹¶åŒ¹é…SKU
- å¯¹æ¥å±±å§†/ç›’é©¬/å®å’šä¹°èœï¼ˆRoadmapï¼‰
- é¢„ç®—æ§åˆ¶ + é£Ÿæä¿è´¨æœŸæé†’

### ğŸ“Š å¥åº·æ•°æ®é—­ç¯
- å¯è§†åŒ–ä½“é‡/ä½“è„‚/è¥å…»æ‘„å…¥è¶‹åŠ¿
- AIåˆ†æè¥å…»å¤±è¡¡å¹¶è‡ªåŠ¨è°ƒæ•´ä¸‹è½®é£Ÿè°±
- ç”Ÿæˆå­£åº¦å¥åº·æŠ¥å‘Š

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (Next.js 15 + React 18 + TypeScript)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API Layer (Next.js API Routes / tRPC)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Logic (Services)                      â”‚
â”‚  â”œâ”€ è¥å…»è®¡ç®—å¼•æ“ (Macro Calculator)              â”‚
â”‚  â”œâ”€ é£Ÿè°±ç”Ÿæˆå™¨ (Meal Planner)                    â”‚
â”‚  â””â”€ SKUåŒ¹é…æœåŠ¡ (Inventory Mapper)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Access Layer (Prisma ORM)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Database (PostgreSQL 16)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

External APIs:
- USDA FoodData Central (è¥å…»æ•°æ®åº“)
- OCR Service (ä½“æ£€æŠ¥å‘Šè¯†åˆ«)
- Wearable Device SDKs (Apple Health / åä¸ºHealth)
```

### æŠ€æœ¯æ ˆ

**å‰ç«¯**:
- Next.js 15 (App Router + Static Export), TypeScript 5.x
- React 18, Tailwind CSS 4.x, shadcn/ui
- Zustand (çŠ¶æ€ç®¡ç†), React Hook Form + Zod

**åç«¯**:
- Cloudflare Functions (Serverless API)
- Prisma 6.x (ORM), NextAuth.js v5

**æ•°æ®åº“ä¸å­˜å‚¨**:
- Supabase PostgreSQL (å…è´¹ 500MB)
- Supabase Storage (å…è´¹ 1GB)

**AI/ML**:
- OpenAI GPT-4 / Anthropic Claude (è¥å…»å»ºè®®)
- Tesseract.js / Azure OCR (æ–‡å­—è¯†åˆ«)

**éƒ¨ç½²**:
- âœ… Cloudflare Pages (å…¨çƒ CDN + è¾¹ç¼˜è®¡ç®—)
- âœ… Supabase (æ•°æ®åº“ + å­˜å‚¨ + è®¤è¯)
- âœ… GitHub + Cloudflare Pages è‡ªåŠ¨éƒ¨ç½² (CI/CD)
- ğŸ å®Œå…¨å…è´¹éƒ¨ç½²æ–¹æ¡ˆ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 20+ LTS
- PostgreSQL 16
- pnpm (æ¨è) æˆ– npm

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/yourusername/HearthBulter.git
cd HearthBulter

# 2. å®‰è£…ä¾èµ–
pnpm install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥æ•°æ®åº“è¿æ¥å’ŒAPIå¯†é’¥

# å¿…éœ€çš„ç¯å¢ƒå˜é‡ï¼š
# DATABASE_URL - PostgreSQLæ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
# NEXTAUTH_SECRET - NextAuth.jså¯†é’¥ï¼ˆè‡³å°‘32ä¸ªå­—ç¬¦ï¼‰
# NEXTAUTH_URL - åº”ç”¨URLï¼ˆå¼€å‘ç¯å¢ƒ: http://localhost:3000ï¼‰

# å¯é€‰çš„ç¯å¢ƒå˜é‡ï¼š
# USDA_API_KEY - USDA FoodData Central APIå¯†é’¥ï¼ˆç”¨äºè¥å…»æ•°æ®æŸ¥è¯¢ï¼‰
# REDIS_URL - Redisè¿æ¥URLï¼ˆç”¨äºç¼“å­˜ï¼Œå¯é€‰ï¼‰
# GOOGLE_CLIENT_ID - Google OAuthå®¢æˆ·ç«¯IDï¼ˆå¯é€‰ï¼‰
# GOOGLE_CLIENT_SECRET - Google OAuthå®¢æˆ·ç«¯å¯†é’¥ï¼ˆå¯é€‰ï¼‰

## è·å–USDA API Key

1. è®¿é—® [USDA FoodData Central API](https://fdc.nal.usda.gov/api-guide.html)
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. åœ¨API Keyé¡µé¢ç”³è¯·å…è´¹APIå¯†é’¥
4. å°†å¯†é’¥æ·»åŠ åˆ° `.env` æ–‡ä»¶ï¼š
   ```
   USDA_API_KEY=your-usda-api-key-here
   ```

**æ³¨æ„**: USDA APIå…è´¹é¢åº¦ä¸ºæ¯å°æ—¶1000æ¬¡è¯·æ±‚ã€‚å¦‚æœæœªé…ç½®API Keyï¼Œç³»ç»Ÿå°†ä»…ä½¿ç”¨æœ¬åœ°æ•°æ®åº“ä¸­çš„é£Ÿç‰©æ•°æ®ã€‚

# 4. åˆå§‹åŒ–æ•°æ®åº“
pnpm prisma migrate dev

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

è®¿é—® `http://localhost:3000` æŸ¥çœ‹åº”ç”¨ã€‚

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
HearthBulter/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router é¡µé¢
â”‚   â”‚   â”œâ”€â”€ (auth)/            # è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ dashboard/         # ä¸»ä»ªè¡¨ç›˜
â”‚   â”‚   â””â”€â”€ api/               # APIè·¯ç”±
â”‚   â”œâ”€â”€ components/            # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/               # shadcn/uiåŸºç¡€ç»„ä»¶
â”‚   â”‚   â””â”€â”€ features/         # ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                   # æ ¸å¿ƒåº“
â”‚   â”‚   â”œâ”€â”€ db/               # Prismaå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ types/                # TypeScriptç±»å‹å®šä¹‰
â”‚   â””â”€â”€ hooks/                # è‡ªå®šä¹‰Hooks
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma         # æ•°æ®åº“Schema
â”œâ”€â”€ openspec/                  # OpenSpecè§„èŒƒæ–‡æ¡£
â”‚   â”œâ”€â”€ project.md            # é¡¹ç›®ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ specs/                # åŠŸèƒ½è§„èŒƒ
â”‚   â””â”€â”€ changes/              # å˜æ›´ææ¡ˆ
â”œâ”€â”€ tests/                     # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                 # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ e2e/                  # E2Eæµ‹è¯•
â””â”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸ§© æ ¸å¿ƒæ¨¡å—

| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| å®¶åº­æ¡£æ¡ˆç®¡ç† | ğŸŸ¡ Planning | æˆå‘˜ä¿¡æ¯ã€å¥åº·ç›®æ ‡ã€è¿‡æ•å² |
| è¥å…»æ•°æ®åº“ | ğŸŸ¡ Planning | USDAé£Ÿç‰©æ•°æ®å¯¹æ¥ |
| å¥åº·æ•°æ®é‡‡é›† | ğŸŸ¡ Planning | æ‰‹åŠ¨å½•å…¥ + å¯ç©¿æˆ´è®¾å¤‡åŒæ­¥ |
| ä½“æ£€æŠ¥å‘Šæ¥å…¥ | ğŸŸ¡ Planning | OCRè¯†åˆ« + ç»“æ„åŒ–å­˜å‚¨ |
| é£Ÿè°±è§„åˆ’å¼•æ“ | ğŸŸ¡ Planning | æ¨¡æ¿åŒ–7å¤©é£Ÿè°±ç”Ÿæˆ |
| è´­ç‰©æ¸…å•ç”Ÿæˆ | ğŸŸ¡ Planning | è‡ªåŠ¨æå–é£Ÿæ + SKUåŒ¹é… |
| å¥åº·è¿½è¸ªä»ªè¡¨ç›˜ | ğŸŸ¡ Planning | è¶‹åŠ¿å¯è§†åŒ– + è¥å…»åˆ†æ |

å›¾ä¾‹: ğŸŸ¢ å·²å®Œæˆ | ğŸŸ¡ è§„åˆ’ä¸­ | ğŸ”´ æœªå¼€å§‹

---

## ğŸ“‹ å¼€å‘è§„èŒƒ

æœ¬é¡¹ç›®é‡‡ç”¨ **OpenSpec** è§„èŒƒé©±åŠ¨å¼€å‘æµç¨‹ï¼š

1. **åˆ›å»ºå˜æ›´ææ¡ˆ** (`openspec/changes/[name]/`)
   - ç¼–å†™ `proposal.md` è¯´æ˜å˜æ›´åŸå› å’Œå½±å“
   - åœ¨ `specs/` ä¸­å®šä¹‰å¢é‡éœ€æ±‚ï¼ˆADDED/MODIFIED/REMOVEDï¼‰
   - åˆ›å»º `tasks.md` å®ç°æ¸…å•

2. **éªŒè¯è§„èŒƒ**
   ```bash
   openspec validate --strict
   ```

3. **å®ç°åŠŸèƒ½**
   - æŒ‰ç…§ `tasks.md` é¡ºåºå®Œæˆ
   - ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡ >80%ï¼‰
   - æäº¤PRå¹¶é€šè¿‡CI/CDæ£€æŸ¥

4. **å½’æ¡£å˜æ›´**
   ```bash
   openspec archive [change-name]
   ```

è¯¦è§ [OpenSpecæ–‡æ¡£](./openspec/AGENTS.md)

### ğŸ” ä»£ç å®¡æŸ¥

é¡¹ç›®é›†æˆäº†è‡ªåŠ¨åŒ–ä»£ç å®¡æŸ¥ç³»ç»Ÿï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œä¸€è‡´æ€§ï¼š

**å®¡æŸ¥ç»´åº¦**:
- **å¤æ‚åº¦åˆ†æ**: æ£€æµ‹å‡½æ•°å¤æ‚åº¦ï¼Œé˜²æ­¢ä»£ç éš¾ä»¥ç»´æŠ¤
- **ç±»å‹å®‰å…¨**: æ£€æŸ¥TypeScriptç±»å‹ä½¿ç”¨ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
- **å®‰å…¨æ¼æ´**: æ‰«æSQLæ³¨å…¥ã€XSSç­‰å¸¸è§å®‰å…¨é—®é¢˜
- **ä»£ç é£æ ¼**: ç»Ÿä¸€å‘½åè§„èŒƒå’Œç¼–ç é£æ ¼
- **æ€§èƒ½ä¼˜åŒ–**: è¯†åˆ«æ½œåœ¨çš„æ€§èƒ½é—®é¢˜

**ä½¿ç”¨æ–¹æ³•**:

```bash
# è¿è¡Œä»£ç å®¡æŸ¥ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
pnpm lint

# ç”Ÿæˆå®¡æŸ¥æŠ¥å‘Š
node scripts/generate-review-report.js

# æŸ¥çœ‹å®¡æŸ¥é…ç½®
cat src/lib/code-review-config.ts
```

**å®¡æŸ¥è§„åˆ™**:
- âœ… é€šè¿‡å®¡æŸ¥: æäº¤æ­£å¸¸è¿›è¡Œ
- âš ï¸ è½»å¾®é—®é¢˜: å…è®¸æäº¤ä½†å»ºè®®ä¿®å¤
- ğŸš« ä¸¥é‡é—®é¢˜: é˜»æ­¢æäº¤ï¼Œå¿…é¡»ä¿®å¤

**CI/CDé›†æˆ**:
- Pre-commité’©å­è‡ªåŠ¨å®¡æŸ¥
- GitHub Actions PRå®¡æŸ¥
- å®¡æŸ¥æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆ

---

## ğŸ§ª æµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
pnpm test

# å•å…ƒæµ‹è¯•ï¼ˆwatchæ¨¡å¼ï¼‰
pnpm test:watch

# E2Eæµ‹è¯•
pnpm test:e2e

# æµ‹è¯•è¦†ç›–ç‡
pnpm test:coverage
```

**æµ‹è¯•è¦æ±‚**:
- æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å¿…é¡»æœ‰å•å…ƒæµ‹è¯•ï¼ˆ>80%è¦†ç›–ç‡ï¼‰
- å…³é”®ç”¨æˆ·æµç¨‹å¿…é¡»æœ‰E2Eæµ‹è¯•
- CI/CDä¸­æµ‹è¯•å¤±è´¥å°†é˜»æ­¢åˆå¹¶

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤å˜æ›´ (`git commit -m 'feat: add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»ºPull Request

**æäº¤è§„èŒƒ**: éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/)

---

## ğŸ›£ï¸ Roadmap

### MVPé˜¶æ®µ (å½“å‰)
- [x] é¡¹ç›®åˆå§‹åŒ– + OpenSpecæ¶æ„å»ºç«‹
- [ ] å®¶åº­æ¡£æ¡ˆç®¡ç†
- [ ] å¥åº·æ•°æ®å½•å…¥
- [ ] è¥å…»æ•°æ®åº“å¯¹æ¥
- [ ] æ¨¡æ¿åŒ–é£Ÿè°±ç”Ÿæˆ
- [ ] è´­ç‰©æ¸…å•ç”Ÿæˆ

### é˜¶æ®µ2 (Q2 2025)
- [ ] ä½“æ£€æŠ¥å‘ŠOCRè¯†åˆ«
- [ ] å¯ç©¿æˆ´è®¾å¤‡æ•°æ®åŒæ­¥
- [ ] ç”µå•†APIå¯¹æ¥ï¼ˆå®å’šä¹°èœï¼‰
- [ ] AIé£Ÿè°±ä¼˜åŒ–

### é˜¶æ®µ3 (Q3 2025)
- [ ] å¤šå¹³å°SKUæ™ºèƒ½åŒ¹é…
- [ ] é«˜çº§è¥å…»åˆ†ææŠ¥å‘Š
- [ ] å®¶åº­å¥åº·è¶‹åŠ¿é¢„æµ‹
- [ ] ç§»åŠ¨ç«¯APP (React Native)

### é˜¶æ®µ4 (Q4 2025)
- [ ] åŒ»ç–—æœºæ„åˆä½œï¼ˆä½“æ£€ä¸­å¿ƒAPIï¼‰
- [ å•†ä¸šåŒ–ï¼ˆè®¢é˜…åˆ¶ + ç”µå•†è¿”ä½£ï¼‰
- [ ] æ™ºèƒ½å®¶å±…è®¾å¤‡é›†æˆ

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

---

## ğŸ‘¨â€ğŸ’» ä½œè€…

**Ronn Huang** - [GitHub](https://github.com/yourusername)

---

## ğŸ™ è‡´è°¢

- [USDA FoodData Central](https://fdc.nal.usda.gov/) - æä¾›è¥å…»æ•°æ®API
- [shadcn/ui](https://ui.shadcn.com/) - ä¼˜ç§€çš„UIç»„ä»¶åº“
- [OpenSpec](https://github.com/openspec-dev/openspec) - è§„èŒƒé©±åŠ¨å¼€å‘æ¡†æ¶

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼**
