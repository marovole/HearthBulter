# ==========================================
# Health Butler 生产环境配置
# Cloudflare Pages + Supabase 架构
# ==========================================

# ============= Supabase 数据库配置 =============
# 获取方式: https://supabase.com/dashboard/project/[project-id]/settings/database

# Supabase 数据库连接 (Transaction Pooler - 高性能)
# 格式: postgresql://postgres.[project-ref]:[password]@aws-[region].pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql://postgres.[PROJECT_REF]:[PASSWORD]@aws-[REGION].pooler.supabase.com:6543/postgres

# ============= Supabase API 配置 =============
# 获取方式: https://supabase.com/dashboard/project/[project-id]/settings/api

# Supabase 项目 URL
NEXT_PUBLIC_SUPABASE_URL=https://[PROJECT_REF].supabase.co

# Supabase 匿名密钥 (客户端使用)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Supabase 服务端密钥 (服务端使用，保密)
SUPABASE_SERVICE_KEY=your-service-role-key-here

# ============= NextAuth 配置 =============
# 生成 NEXTAUTH_SECRET: openssl rand -base64 32
NEXTAUTH_SECRET=your-nextauth-secret-min-32-chars
NEXTAUTH_URL=https://hearthbulter.pages.dev

# ============= Cloudflare Pages 配置 =============
# Cloudflare Pages 会自动提供 CF_PAGES_URL 环境变量
# 自定义域名 (可选)
NEXT_PUBLIC_SITE_URL=https://hearthbulter.pages.dev
NEXT_PUBLIC_ALLOWED_ORIGINS=https://hearthbulter.pages.dev

# Node.js 环境
NODE_ENV=production

# ============= 第三方服务配置 =============

# OpenAI API (用于 AI 功能)
OPENAI_API_KEY=sk-your-openai-api-key

# OpenRouter API (用于 Claude 集成)
OPENROUTER_API_KEY=your-openrouter-api-key

# USDA API (用于营养数据)
USDA_API_KEY=your-usda-api-key

# ============= 可选配置 =============

# Redis 缓存 (如果使用 Upstash Redis)
# UPSTASH_REDIS_REST_URL=https://your-redis-url.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your-redis-token

# 邮件服务配置 (如果使用邮件通知)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# Webhook 通知 URL (用于部署通知)
# WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ============= 安全设置 =============

# NextAuth 密钥 (如果使用 NextAuth)
NEXTAUTH_SECRET=your-nextauth-secret-min-32-characters-long
NEXTAUTH_URL=https://your-domain.pages.dev

# JWT 密钥 (用于令牌签名)
JWT_SECRET=your-jwt-secret-key-min-32-characters

# ============= 性能配置 =============

# 缓存配置
CACHE_TTL=3600
API_CACHE_TTL=300
STATIC_CACHE_TTL=86400

# 数据库连接池配置
DATABASE_POOL_SIZE=10
DATABASE_TIMEOUT=30000

# ============= 监控配置 =============

# Sentry DSN (用于错误追踪)
# SENTRY_DSN=https://your-sentry-dsn.ingest.sentry.io

# Google Analytics (如果使用)
# NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# ============= 功能开关 =============

# 启用/禁用功能
NEXT_PUBLIC_ENABLE_ANALYTICS=true
NEXT_PUBLIC_ENABLE_REALTIME=true
NEXT_PUBLIC_ENABLE_NOTIFICATIONS=true

# AI 功能开关
NEXT_PUBLIC_ENABLE_AI_RECOMMENDATIONS=true
NEXT_PUBLIC_ENABLE_AI_CHAT=true

# ============= 部署配置 =============

# 构建配置
NEXT_TELEMETRY_DISABLED=1
GENERATE_SOURCEMAP=false

# 优化配置
NEXT_BUNDLE_ANALYZER=false
NEXT_OPTIMIZE_IMAGES=true

# ======================================
# 配置说明
# ======================================
#
# 必需配置:
# - SUPABASE_URL: Supabase 项目 URL
# - SUPABASE_SERVICE_KEY: 服务端密钥
# - NEXT_PUBLIC_SUPABASE_URL: 客户端 URL
# - NEXT_PUBLIC_SUPABASE_ANON_KEY: 客户端密钥
# - CLOUDFLARE_ACCOUNT_ID: Cloudflare 账户 ID
# - CLOUDFLARE_API_TOKEN: Cloudflare API Token
# - NEXT_PUBLIC_SITE_URL: 站点域名
#
# 获取方式:
# 1. Supabase URL 和密钥: Supabase Dashboard → Settings → API
# 2. Cloudflare 账户 ID: Dashboard 右侧边栏
# 3. Cloudflare API Token: Dashboard → My Profile → API Tokens
# 4. 第三方 API 密钥: 相应服务商官网
#
# 安全配置:
# - 所有密钥必须保密
# - 使用强密码生成器
# - 定期轮换密钥
# - 不要在代码中硬编码
#
# 部署前检查:
# 1. 所有必需变量已设置
# 2. 所有 URL 格式正确
# 3. 所有密钥有效
# 4. 环境变量已加密存储
#
# ======================================
